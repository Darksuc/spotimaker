<!doctype html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spotimaker Premium</title>
    <style>
        :root {
            --bg: #0b0b0f;
            --card: #12121a;
            --muted: rgba(255,255,255,.7);
            --text: #fff;
            --line: rgba(255,255,255,.12);
            --accent: #22c55e;
        }

        body {
            font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
            max-width: 900px;
            margin: 40px auto;
            padding: 0 16px;
            background: var(--bg);
            color: var(--text);
        }

        a {
            color: #fff
        }

        .top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 18px
        }

        .btn {
            display: inline-block;
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid var(--line);
            text-decoration: none
        }

            .btn.white {
                background: #fff;
                color: #0b0b0f;
                font-weight: 800;
                border-color: transparent
            }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px
        }

        .card {
            background: rgba(18,18,26,.75);
            border: 1px solid var(--line);
            border-radius: 16px;
            padding: 16px
        }

        .muted {
            color: var(--muted)
        }

        .price {
            font-size: 34px;
            font-weight: 900;
            margin: 8px 0
        }

        ul {
            margin: 10px 0 0 18px
        }

        li {
            margin: 8px 0
        }

        @media(max-width:780px) {
            .grid {
                grid-template-columns: 1fr
            }
        }
    </style>
</head>
<body>
    <div class="top">
        <a class="btn" href="/">← Geri</a>
        <a class="btn white" href="#" onclick="alert('Odeme eklenmedi. Yakinda!')">Premium al</a>
    </div>

    <h1>Premium</h1>
    <p class="muted">Daha uzun playlist, daha hizli kaydetme, daha iyi eslesme. (Odeme yakinda.)</p>

    <div class="grid">
        <div class="card">
            <h2>Free</h2>
            <div class="price">$0</div>
            <div class="muted">Baslangic icin yeterli.</div>
            <ul>
                <li>20-200 sarki uretme</li>
                <li>Spotify baglama</li>
                <li>Manuel Spotify'a ekle</li>
                <li>Gunluk kaydetme limiti: 50 (yakinda)</li>
            </ul>
        </div>

        <div class="card" style="border-color:rgba(34,197,94,.5)">
            <h2>Premium</h2>
            <div class="price">$4.99<span style="font-size:14px;font-weight:700">/ay</span></div>
            <div class="muted">En populer plan.</div>
            <ul>
                <li>Gunluk limit kalkar</li>
                <li>Daha iyi Spotify eslesme</li>
                <li>Kaydetme daha hizli (batch)</li>
                <li>Editor pass (daha iyi akıs)</li>
            </ul>
            <div style="margin-top:14px">
                <a class="btn white" href="#" onclick="alert('Odeme eklenmedi. Yakinda!')">Premium al</a>
            </div>
        </div>
    </div>

    <div class="card" style="margin-top:14px">
        <h3>SSS</h3>
        <div class="card" style="margin-top:14px">
            <h3>Hediye Kodunu Kullan</h3>
            <p class="muted">Bir premium kodun varsa buraya gir. (Önce Spotify’a bağlanman lazım.)</p>

            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px">
                <input id="redeemCode" placeholder="Örn: AB3K7Z-123456"
                       style="flex:1; min-width:240px; padding:12px; border-radius:12px; border:1px solid var(--line); background:rgba(255,255,255,.06); color:#fff" />
                <button class="btn white" id="redeemBtn">Kodu Kullan</button>
            </div>

            <div id="redeemMsg" class="muted" style="margin-top:10px"></div>
        </div>

        <script>
            const btn = document.getElementById("redeemBtn");
            const inp = document.getElementById("redeemCode");
            const msg = document.getElementById("redeemMsg");

            btn.onclick = async () => {
                msg.textContent = "Kontrol ediliyor...";
                btn.disabled = true;
                try {
                    const r = await fetch("/api/redeem", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        credentials: "include",
                        body: JSON.stringify({ code: inp.value })
                    });
                    const j = await r.json().catch(() => ({}));
                    if (!r.ok) throw new Error(j.error || "Kod kullanılamadı.");

                    const d = new Date(j.premium_until);
                    msg.textContent = "✅ Premium aktif! Bitiş: " + d.toLocaleString("tr-TR");
                    setTimeout(() => location.href = "/", 900);
                } catch (e) {
                    msg.textContent = "❌ " + String(e.message || e);
                } finally {
                    btn.disabled = false;
                }
            };
        </script>

        <p class="muted"><b>Premium nasil acilacak?</b> Stripe ile odeme ekleyecegiz. Simdilik test asamasinda.</p>
        <p class="muted"><b>Spotify’a ekleme neden bazen eksik?</b> Bazi sarkilar Spotify search’te eslesmeyebilir. Yakinda eslesme kalitesini artiracagiz.</p>
    </div>
</body>
</html>
